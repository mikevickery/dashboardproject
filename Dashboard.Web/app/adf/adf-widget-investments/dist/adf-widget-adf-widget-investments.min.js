!function(t,e){"use strict";function n(t,e){function n(){t.$parent.model.title="Investment Analyzer - "+t.investment.dataset_code}function a(e){for(var n=[],a=[],s=[],c=[],r=e;r>=0;r--)c.push(t.investment.data[r]);c.forEach(function(t,a){e>60?a%10==0&&n.push(t[0]):e>20&&61>e?a%2==0&&n.push(t[0]):n.push(t[0])}),c.forEach(function(t){a.push(t[4])}),c.forEach(function(t){s.push(t[5])}),i(n,a,s)}function i(e,n,a){t.labels=e,t.series=[t.investment.column_names[4]+" Price"],t.data=[n],t.onClick=function(t,e){console.log(t,e)}}t.investment=e,e&&(n(),a(5),t.active="week"),t.changeRange=function(e,n){a(e),t.active=n}}function a(t){var e="",n="EYWa43Yiw7xreqxtDcYs";this.getCompanyByTicker=function(a){var i="https://www.quandl.com/api/v3/datasets/WIKI/"+a+".json?api_key="+n;return t.get(i).then(function(t){return e=t.data.dataset})},this.getActiveCompany=function(){return e}}var i=angular.module("adf.widget.investments",["adf.provider","chart.js"]).config(["dashboardProvider",function(t){t.widget("investments",{title:"Investment Analyzer",description:"Current financial information on public companies",templateUrl:"{widgetsPath}/adf-widget-investments/src/view.html",controller:"RequestController",reload:!0,resolve:{data:["RequestService","config",function(t,e){return e.ticker?t.getCompanyByTicker(e.ticker):void 0}]},edit:{templateUrl:"{widgetsPath}/adf-widget-investments/src/edit.html"}})}]);angular.module("adf.widget.investments").run(["$templateCache",function(t){t.put("{widgetsPath}/adf-widget-investments/src/edit.html",'<div><form role=form><div class=form-group><label for=sample>Gather information about your investements</label> <input type=text class=form-control id=sample ng-model=config.ticker placeholder="Enter Company Ticker"></div></form></div>'),t.put("{widgetsPath}/adf-widget-investments/src/view.html",'<div><div ng-if=investment><h5>{{investment.name.substr(0,investment.name.indexOf(\'(\'))}}</h5><p>As of {{investment.data[0][0] | date:\'MM/dd/yyyy\'}} {{investment.dataset_code}} closed at an adjusted price of {{investment.data[0][11] | currency}} and had a volume of {{investment.data[0][12] | number:0}}.</p><div class="btn-group text-center"><span type=button class="btn btn-default" ng-class="{active: active === \'week\'}" ng-click="changeRange(5, \'week\')">5 Days</span> <span type=button class="btn btn-default" ng-class="{active: active === \'month\'}" ng-click="changeRange(20, \'month\')">1 Month</span> <span type=button class="btn btn-default" ng-class="{active: active === \'months\'}" ng-click="changeRange(60, \'months\')">3 Months</span> <span type=button class="btn btn-default" ng-class="{active: active === \'year\'}" ng-click="changeRange(260, \'year\')">1 Year</span></div><canvas id=line class="chart chart-line" chart-data=data chart-labels=labels chart-legend=true chart-series=series chart-click=onClick></canvas></div></div>')}]);var i=angular.module("adf.widget.investments");i.controller("RequestController",n),n.$inject=["$scope","data"];var i=angular.module("adf.widget.investments");i.service("RequestService",a),a.$inject=["$http"]}(window);